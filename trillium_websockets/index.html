<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A websocket trillium handler"><title>trillium_websockets - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-452d19225583af2a.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="trillium_websockets" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (fb5ed726f 2023-12-28)" data-channel="nightly" data-search-js="search-c17e98913a53b3b7.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-6902632119e002ca.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../trillium_websockets/index.html">trillium_websockets</a><span class="version">0.6.0</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li><li><a href="#attributes">Attribute Macros</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../trillium_websockets/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">trillium_websockets</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/trillium_websockets/lib.rs.html#1-326">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="a-websocket-trillium-handler"><a href="#a-websocket-trillium-handler">A websocket trillium handler</a></h2>
<p>There are three primary ways to use this crate</p>
<h3 id="with-an-async-function-that-receives-a-websocketconn"><a href="#with-an-async-function-that-receives-a-websocketconn">With an async function that receives a <code>WebSocketConn</code></a></h3>
<p>This is the simplest way to use trillium websockets, but does not
provide any of the affordances that implementing the
<a href="trait.WebSocketHandler.html" title="trait trillium_websockets::WebSocketHandler"><code>WebSocketHandler</code></a> trait does. It is best for very simple websockets
or for usages that require moving the WebSocketConn elsewhere in an
application. The WebSocketConn is fully owned at this point, and will
disconnect when dropped, not when the async function passed to
<code>websocket</code> completes.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>futures_lite::stream::StreamExt;
<span class="kw">use </span>trillium_websockets::{Message, WebSocketConn, websocket};

<span class="kw">let </span>handler = websocket(|<span class="kw-2">mut </span>conn: WebSocketConn| <span class="kw">async move </span>{
    <span class="kw">while let </span><span class="prelude-val">Some</span>(<span class="prelude-val">Ok</span>(Message::Text(input))) = conn.next().<span class="kw">await </span>{
        conn.send_string(<span class="macro">format!</span>(<span class="string">"received your message: {}"</span>, <span class="kw-2">&amp;</span>input)).<span class="kw">await</span>;
    }
});</code></pre></div>
<h3 id="implementing-websockethandler"><a href="#implementing-websockethandler">Implementing <code>WebSocketHandler</code></a></h3>
<p><a href="trait.WebSocketHandler.html" title="trait trillium_websockets::WebSocketHandler"><code>WebSocketHandler</code></a> provides support for sending outbound messages as a
stream, and simplifies common patterns like executing async code on
received messages.</p>
<h3 id="using-jsonwebsockethandler"><a href="#using-jsonwebsockethandler">Using <code>JsonWebSocketHandler</code></a></h3>
<p>[<code>JsonWebSocketHandler</code>] provides a thin serialization and
deserialization layer on top of <a href="trait.WebSocketHandler.html" title="trait trillium_websockets::WebSocketHandler"><code>WebSocketHandler</code></a> for this common
use case.  See the [<code>JsonWebSocketHandler</code>] documentation for example
usage. In order to use this trait, the <code>json</code> cargo feature must be
enabled.</p>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.async_tungstenite"><code>pub use async_tungstenite;</code></div></li><li><div class="item-name" id="reexport.tungstenite"><code>pub use async_tungstenite::tungstenite;</code></div></li></ul><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.WebSocket.html" title="struct trillium_websockets::WebSocket">WebSocket</a></div><div class="desc docblock-short">The trillium handler.
See crate-level docs for example usage.</div></li><li><div class="item-name"><a class="struct" href="struct.WebSocketConfig.html" title="struct trillium_websockets::WebSocketConfig">WebSocketConfig</a></div><div class="desc docblock-short">The configuration for WebSocket connection.</div></li><li><div class="item-name"><a class="struct" href="struct.WebSocketConn.html" title="struct trillium_websockets::WebSocketConn">WebSocketConn</a></div><div class="desc docblock-short">A struct that represents an specific websocket connection.</div></li></ul><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum trillium_websockets::Error">Error</a></div><div class="desc docblock-short">An Error type that represents all exceptional conditions that can be encoutered in the operation
of this crate</div></li><li><div class="item-name"><a class="enum" href="enum.Message.html" title="enum trillium_websockets::Message">Message</a></div><div class="desc docblock-short">An enum representing the various forms of a WebSocket message.</div></li></ul><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.WebSocketHandler.html" title="trait trillium_websockets::WebSocketHandler">WebSocketHandler</a></div><div class="desc docblock-short">This is the trait that defines a handler for trillium websockets.</div></li></ul><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.websocket.html" title="fn trillium_websockets::websocket">websocket</a></div><div class="desc docblock-short">Builds a new trillium handler from the provided
WebSocketHandler. Alias for <a href="struct.WebSocket.html#method.new" title="associated function trillium_websockets::WebSocket::new"><code>WebSocket::new</code></a></div></li></ul><h2 id="types" class="section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type trillium_websockets::Result">Result</a></div><div class="desc docblock-short">a Result type for this crate</div></li></ul><h2 id="attributes" class="section-header"><a href="#attributes">Attribute Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="attr" href="attr.async_trait.html" title="attr trillium_websockets::async_trait">async_trait</a></div></li></ul></section></div></main></body></html>